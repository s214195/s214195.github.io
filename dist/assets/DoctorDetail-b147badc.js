import{_ as N,y as T,r as l,g as B,m as R,x as j,z as F,o as g,c as b,b as e,t as i,h as P,A as Y,w as p,v as m,F as E,k as Q,q,p as G,i as H}from"./index-3ef0913f.js";import{g as D,a as Z,_ as J,p as K,c as W,Q as X}from"./index.esm2017-22a8fd5d.js";import{d as x}from"./firebaseInit-31726731.js";const c=v=>(G("data-v-ef5c5677"),v=v(),H(),v),$={class:"doctor-detail"},ee={class:"card mb-3"},oe={class:"row g-0"},te={class:"col-md-4"},ae=["src"],se={class:"col-md-8"},ne={class:"card-body"},le={class:"card-title"},ie={class:"card-text"},ce={class:"text-muted"},re={class:"card-text"},ue={class:"card-text"},de={class:"card-text"},pe=["href"],me=c(()=>e("div",{class:"modal-background"},null,-1)),ve={class:"modal-content"},fe={class:"box"},_e=c(()=>e("h1",{class:"title"},"Make an appointment",-1)),ge={class:"field form-group"},be=c(()=>e("label",{class:"label form-label"},"Date and Time",-1)),he={class:"field form-group"},ye=c(()=>e("label",{class:"label form-label"},"Name",-1)),we={class:"field form-group"},xe=c(()=>e("label",{class:"label form-label"},"Surname",-1)),ke={class:"field form-group"},De=c(()=>e("label",{class:"label form-label"},"Age",-1)),Ae={class:"field form-group"},Se=c(()=>e("label",{class:"label form-label"},"Brief Description of Disease",-1)),Ce={class:"card-text"},Me={key:0},ze=c(()=>e("div",{id:"mymap",class:"map"},null,-1)),Le={__name:"DoctorDetail",setup(v){const k=T(),o=l({}),f=l(!1),r=l(""),u=l(null),s=l({name:"",surname:"",age:null,diseaseDescription:"",number:"",email:""}),h=l(!1),_=l(""),d=l(null),A=B();R(d,n=>{console.log(n?"User is signed in!":"No user signed in!")}),j(A,n=>{n?d.value=n:d.value=null});function S(){d.value?h.value=!0:alert("You need to sign in to make an appointment!")}function y(){h.value=!1}function C(){const n=new Date,t=new Date(_.value);return s.value.name.trim()!==""&&s.value.surname.trim()!==""&&s.value.age!==null&&s.value.diseaseDescription.trim()!==""&&s.value.number.trim()!==""&&s.value.email.trim()!==""&&t>n}async function M(){if(!C()){alert("Please fill in all fields in the form and ensure the date is in the future!");return}if(!d.value){alert("You need to sign in to make an appointment!");return}console.log(o.value.Surname),console.log(o.Surname),console.log(o.name),console.log("Appointment");const n=J(x,"appointments");await K(n,{userId:d.value.uid,date:_.value,doctorName:o.value.name,doctorLoc:o.value.city,doctorSurname:o.value.Surname,patientName:s.value.name,patientSurname:s.value.surname,patientAge:s.value.age,diseaseDescription:s.value.diseaseDescription,patientAge:s.value.number,patientAge:s.value.email}),y()}function z(){f.value=!f.value}async function I(){if(o.value.opinions&&r.value.trim()!==""){o.value.opinions.push(r.value);const n=k.params.id,t=D(x,"doctors",n);await W(t,{opinions:X(r.value)}),r.value=""}}function V(){u.value=L.map("mymap").setView([50.049683,19.944544],13),L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',maxZoom:18}).addTo(u.value),L.marker([o.value.localization.latitude,o.value.localization.longitude]).addTo(u.value)}function U(){navigator.geolocation?navigator.geolocation.getCurrentPosition(O):alert("Geolocation is not supported by this browser.")}function O(n){const t=n.coords.latitude,a=n.coords.longitude;console.log("Latitude: "+t+", Longitude: "+a),u.value.setView([t,a],13);var w=L.icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],shadowSize:[41,41],iconAnchor:[12,41],shadowAnchor:[4,62],popupAnchor:[1,-34]});L.marker([t,a],{icon:w}).addTo(u.value),L.polyline([[o.value.localization.latitude,o.value.localization.longitude],[t,a]],{color:"red"}).addTo(u.value)}return F(async()=>{const n=k.params.id,t=D(x,"doctors",n),a=await Z(t);a.exists()?(o.value=a.data(),o.value.Calendar||(o.value.Calendar=Array(30).fill(!1)),V()):console.log("No such document!")}),(n,t)=>(g(),b("div",$,[e("div",ee,[e("div",oe,[e("div",te,[e("img",{src:"https://firebasestorage.googleapis.com/v0/b/e-doctor-923d0.appspot.com/o/logo.png?alt=media&token=81045d1f-6fd9-43bf-b15f-7e7fb5c3c286",alt:"Doctor Image",class:"img-fluid rounded-circle"},null,8,ae)]),e("div",se,[e("div",ne,[e("h5",le,i(o.value.name)+" "+i(o.value.Surname),1),e("p",ie,[e("small",ce,"Cabinet localization: "+i(o.value.city),1)]),e("p",re,"Specialization: "+i(o.value.specialization),1),e("p",ue,"Experience: "+i(o.value.experience)+" years",1),e("p",de,[P("Call doctor: "),e("a",{href:"tel:"+o.value.number},i(o.value.number),9,pe)]),e("button",{class:"btn btn-primary",onClick:S},"Make Appointment"),e("div",{class:Y(["modal",{"is-active":h.value}])},[me,e("div",ve,[e("div",fe,[_e,e("div",ge,[be,p(e("input",{class:"input form-control",type:"datetime-local","onUpdate:modelValue":t[0]||(t[0]=a=>_.value=a)},null,512),[[m,_.value]])]),e("div",he,[ye,p(e("input",{class:"input form-control",type:"text","onUpdate:modelValue":t[1]||(t[1]=a=>s.value.name=a)},null,512),[[m,s.value.name]])]),e("div",we,[xe,p(e("input",{class:"input form-control",type:"text","onUpdate:modelValue":t[2]||(t[2]=a=>s.value.surname=a)},null,512),[[m,s.value.surname]])]),e("div",ke,[De,p(e("input",{class:"input form-control",type:"number","onUpdate:modelValue":t[3]||(t[3]=a=>s.value.age=a)},null,512),[[m,s.value.age]])]),e("div",Ae,[Se,p(e("textarea",{class:"textarea form-control","onUpdate:modelValue":t[4]||(t[4]=a=>s.value.diseaseDescription=a)},null,512),[[m,s.value.diseaseDescription]])]),e("div",{class:"buttons form-group d-flex justify-content-center"},[e("button",{class:"button btn btn-primary",onClick:M},"Submit"),e("button",{class:"button btn btn-secondary",onClick:y},"Cancel")])])]),e("button",{class:"modal-close is-large",onClick:y})],2),e("p",Ce,[e("button",{class:"btn btn-primary",onClick:z},i(f.value?"Hide Opinions":"Show Opinions"),1)]),f.value?(g(),b("div",Me,[(g(!0),b(E,null,Q(o.value.opinions,(a,w)=>(g(),b("div",{class:"opinion",key:w},i(a),1))),128)),p(e("input",{"onUpdate:modelValue":t[5]||(t[5]=a=>r.value=a),type:"text",placeholder:"Add your opinion",class:"form-control mb-3"},null,512),[[m,r.value]]),e("button",{class:"btn btn-primary",onClick:I},"Add Opinion")])):q("",!0)])])])]),e("div",{class:"col-md-4"},[ze,e("button",{class:"btn btn-primary",onClick:U},"Locate Me")])]))}},Oe=N(Le,[["__scopeId","data-v-ef5c5677"]]);export{Oe as default};
